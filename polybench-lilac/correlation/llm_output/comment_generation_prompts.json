{
  "system_prompt": "You are an expert C programmer and documentation specialist.\nYour task is to analyze C code segments and generate clear, concise, and helpful comments\nthat explain what each code segment does.\n\nRespond with VALID JSON ONLY using this schema:\n{\n  \"replacements\": [\n    {\n      \"id\": \"<function>_<TYPE>_<segment>\",\n      \"original\": \"<exact original placeholder line as it appears>\",\n      \"replacement\": \"// <clear description of what this code segment does>\"\n    }\n  ]\n}\n\nGuidelines for good comments:\n- Function comments: Explain the purpose and high-level behavior\n- Loop comments: Describe what the loop iterates over and its purpose\n- Control flow comments: Explain the condition and what happens in each branch\n- Use clear, concise language\n- Focus on \"what\" and \"why\", not just \"how\"\n- Avoid obvious statements like \"increment i\"\n- Use technical terms appropriately for the domain\n- For mathematical operations, explain the mathematical concept",
  "user_prompt": "Please analyze these C code segments and generate appropriate comments for each placeholder.\n\nTotal placeholders to comment: 24\n\nReturn ONLY JSON with the exact schema described. For each placeholder, include:\n- id (use the provided Placeholder ID as-is)\n- original (use the provided Original line verbatim)\n- replacement (a single-line C comment beginning with //)\n\nCode segments to analyze:\n==================================================\n\nPlaceholder ID: unknown_FUNCTION_init_array\nOriginal: // INSERT COMMENT FUNCTION: init_array\nFunction: unknown\nType: FUNCTION\nSegment: init_array\nCode:\nvoid init_array(uint32_t m, uint32_t n, double* data) {\n  int64_t i;\n  int64_t j;\n\n// INSERT COMMENT LOOP: init_array::for.cond\n\nContext: Function unknown definition\n\n\nPlaceholder ID: unknown_FUNCTION_print_array\nOriginal: // INSERT COMMENT FUNCTION: print_array\nFunction: unknown\nType: FUNCTION\nSegment: print_array\nCode:\nvoid print_array(uint32_t m, double* corr) {\n  int64_t i;\n  uint64_t j;\n  int32_t num_blocks_m_x32;\n\n\nContext: Function unknown definition\n\n\nPlaceholder ID: unknown_FUNCTION_num_blocks\nOriginal: // INSERT COMMENT FUNCTION: num_blocks\nFunction: unknown\nType: FUNCTION\nSegment: num_blocks\nCode:\nuint32_t num_blocks(uint32_t num, uint32_t factor) {\n  return ((num + factor) - 1) / factor;\n}\n// INSERT COMMENT FUNCTION: kernel_mean\nvoid kernel_mean(uint32_t m, uint32_t n, double* data, double* corr, double* mean, double* stddev, uint32_t gridDim_x, uint32_t gridDim_y, uint32_t gridDim_z, uint32_t blockDim_x, uint32_t blockDim_y, uint32_t blockDim_z, uint32_t blockIdx_x, uint32_t blockIdx_y, uint32_t blockIdx_z, uint32_t threadIdx_x, uint32_t threadIdx_y, uint32_t threadIdx_z) {\n\nContext: Function unknown definition\n\n\nPlaceholder ID: unknown_FUNCTION_kernel_mean\nOriginal: // INSERT COMMENT FUNCTION: kernel_mean\nFunction: unknown\nType: FUNCTION\nSegment: kernel_mean\nCode:\nvoid kernel_mean(uint32_t m, uint32_t n, double* data, double* corr, double* mean, double* stddev, uint32_t gridDim_x, uint32_t gridDim_y, uint32_t gridDim_z, uint32_t blockDim_x, uint32_t blockDim_y, uint32_t blockDim_z, uint32_t blockIdx_x, uint32_t blockIdx_y, uint32_t blockIdx_z, uint32_t threadIdx_x, uint32_t threadIdx_y, uint32_t threadIdx_z) {\n  int64_t j;\n  int64_t i;\n\n// INSERT COMMENT IFELSE: kernel_mean::entry\n\nContext: Function unknown definition\n\n\nPlaceholder ID: unknown_FUNCTION_kernel_stddev\nOriginal: // INSERT COMMENT FUNCTION: kernel_stddev\nFunction: unknown\nType: FUNCTION\nSegment: kernel_stddev\nCode:\nvoid kernel_stddev(uint32_t m, uint32_t n, double* data, double* corr, double* mean, double* stddev, uint32_t gridDim_x, uint32_t gridDim_y, uint32_t gridDim_z, uint32_t blockDim_x, uint32_t blockDim_y, uint32_t blockDim_z, uint32_t blockIdx_x, uint32_t blockIdx_y, uint32_t blockIdx_z, uint32_t threadIdx_x, uint32_t threadIdx_y, uint32_t threadIdx_z) {\n  int64_t j;\n  int64_t i;\n  double stddev_root;\n\n\nContext: Function unknown definition\n\n\nPlaceholder ID: unknown_FUNCTION_kernel_reduce\nOriginal: // INSERT COMMENT FUNCTION: kernel_reduce\nFunction: unknown\nType: FUNCTION\nSegment: kernel_reduce\nCode:\nvoid kernel_reduce(uint32_t m, uint32_t n, double* data, double* corr, double* mean, double* stddev, uint32_t gridDim_x, uint32_t gridDim_y, uint32_t gridDim_z, uint32_t blockDim_x, uint32_t blockDim_y, uint32_t blockDim_z, uint32_t blockIdx_x, uint32_t blockIdx_y, uint32_t blockIdx_z, uint32_t threadIdx_x, uint32_t threadIdx_y, uint32_t threadIdx_z) {\n  int32_t i;\n  int64_t j;\n  double sqrt_n;\n\n\nContext: Function unknown definition\n\n\nPlaceholder ID: unknown_FUNCTION_kernel_diag\nOriginal: // INSERT COMMENT FUNCTION: kernel_diag\nFunction: unknown\nType: FUNCTION\nSegment: kernel_diag\nCode:\nvoid kernel_diag(uint32_t m, uint32_t n, double* data, double* corr, double* mean, double* stddev, uint32_t gridDim_x, uint32_t gridDim_y, uint32_t gridDim_z, uint32_t blockDim_x, uint32_t blockDim_y, uint32_t blockDim_z, uint32_t blockIdx_x, uint32_t blockIdx_y, uint32_t blockIdx_z, uint32_t threadIdx_x, uint32_t threadIdx_y, uint32_t threadIdx_z) {\n  int32_t i;\n\n// INSERT COMMENT IFELSE: kernel_diag::entry\n  i = blockDim_x * blockIdx_x + threadIdx_x;\n\nContext: Function unknown definition\n\n\nPlaceholder ID: unknown_FUNCTION_kernel_corr\nOriginal: // INSERT COMMENT FUNCTION: kernel_corr\nFunction: unknown\nType: FUNCTION\nSegment: kernel_corr\nCode:\nvoid kernel_corr(uint32_t m, uint32_t n, double* data, double* corr, double* mean, double* stddev, uint32_t gridDim_x, uint32_t gridDim_y, uint32_t gridDim_z, uint32_t blockDim_x, uint32_t blockDim_y, uint32_t blockDim_z, uint32_t blockIdx_x, uint32_t blockIdx_y, uint32_t blockIdx_z, uint32_t threadIdx_x, uint32_t threadIdx_y, uint32_t threadIdx_z) {\n  int32_t i;\n  int32_t j;\n  int64_t k;\n\n\nContext: Function unknown definition\n\n\nPlaceholder ID: unknown_FUNCTION_kernel_tail\nOriginal: // INSERT COMMENT FUNCTION: kernel_tail\nFunction: unknown\nType: FUNCTION\nSegment: kernel_tail\nCode:\nvoid kernel_tail(uint32_t m, uint32_t n, double* data, double* corr, double* mean, double* stddev, uint32_t gridDim_x, uint32_t gridDim_y, uint32_t gridDim_z, uint32_t blockDim_x, uint32_t blockDim_y, uint32_t blockDim_z, uint32_t blockIdx_x, uint32_t blockIdx_y, uint32_t blockIdx_z, uint32_t threadIdx_x, uint32_t threadIdx_y, uint32_t threadIdx_z) {\n  corr[(((m - 1) * m + m) - 1)] = 1;\n}\n// INSERT COMMENT FUNCTION: kernel\nvoid kernel(uint32_t m, uint32_t n, double* data, double* corr, double* mean, double* stddev) {\n\nContext: Function unknown definition\n\n\nPlaceholder ID: unknown_FUNCTION_kernel\nOriginal: // INSERT COMMENT FUNCTION: kernel\nFunction: unknown\nType: FUNCTION\nSegment: kernel\nCode:\nvoid kernel(uint32_t m, uint32_t n, double* data, double* corr, double* mean, double* stddev) {\n  struct Dim3 grid_mean_blocks;    /* Address-exposed local */\n  struct Dim3 block_256x1;    /* Address-exposed local */\n  struct Dim3Coerce grid_mean_blocks_coerce;    /* Address-exposed local */\n  struct Dim3Coerce block_256x1_coerce;    /* Address-exposed local */\n\nContext: Function unknown definition\n\n\nPlaceholder ID: unknown_LOOP_init_array\nOriginal: // INSERT COMMENT LOOP: init_array\nFunction: unknown\nType: LOOP\nSegment: init_array\nCode:\nfor(int64_t i = 0; i < m;   i = i + 1){\nfor(int64_t j = 0; j < n;   j = j + 1){\n  data[(i * n + j)] = (((double)(i) * (double)(j)) / 1000);\n\nContext: Loop 'init_array' in function unknown\n\n\nPlaceholder ID: unknown_LOOP_print_array\nOriginal: // INSERT COMMENT LOOP: print_array\nFunction: unknown\nType: LOOP\nSegment: print_array\nCode:\nfor(int64_t i = 0; i < m;   i = i + 1){\nfor(int64_t j = 0; j < m;   j = j + 1){\n  fprintf(stderr, (fmt_double_space), corr[(i * m + j)]);\n\nContext: Loop 'print_array' in function unknown\n\n\nPlaceholder ID: unknown_LOOP_kernel\nOriginal: // INSERT COMMENT LOOP: kernel\nFunction: unknown\nType: LOOP\nSegment: kernel\nCode:\n#pragma omp parallel for collapse(2)\nfor(int32_t i = 0; i < 8;   i = i + 1){\nfor(int32_t j = 0; j < 32;   j = j + 1){\n\nContext: Loop 'kernel' in function unknown\n\n\nPlaceholder ID: unknown_LOOP_kernel\nOriginal: // INSERT COMMENT LOOP: kernel\nFunction: unknown\nType: LOOP\nSegment: kernel\nCode:\n#pragma omp parallel for collapse(2)\nfor(int32_t i = 0; i < 8;   i = i + 1){\nfor(int32_t j = 0; j < 32;   j = j + 1){\n\nContext: Loop 'kernel' in function unknown\n\n\nPlaceholder ID: unknown_LOOP_kernel\nOriginal: // INSERT COMMENT LOOP: kernel\nFunction: unknown\nType: LOOP\nSegment: kernel\nCode:\n#pragma omp parallel for collapse(2)\nfor(int32_t i = 0; i < 8;   i = i + 1){\nfor(int32_t j = 0; j < 32;   j = j + 1){\n\nContext: Loop 'kernel' in function unknown\n\n\nPlaceholder ID: unknown_LOOP_kernel\nOriginal: // INSERT COMMENT LOOP: kernel\nFunction: unknown\nType: LOOP\nSegment: kernel\nCode:\n#pragma omp parallel for collapse(2)\nfor(int32_t i = 0; i < 8;   i = i + 1){\nfor(int32_t j = 0; j < 32;   j = j + 1){\n\nContext: Loop 'kernel' in function unknown\n\n\nPlaceholder ID: unknown_LOOP_kernel\nOriginal: // INSERT COMMENT LOOP: kernel\nFunction: unknown\nType: LOOP\nSegment: kernel\nCode:\n#pragma omp parallel for collapse(2)\nfor(int32_t i = 0; i < 8;   i = i + 1){\nfor(int32_t j = 0; j < 32;   j = j + 1){\n\nContext: Loop 'kernel' in function unknown\n\n\nPlaceholder ID: unknown_IFELSE_main::entry\nOriginal: // INSERT COMMENT IFELSE: main::entry\nFunction: unknown\nType: IFELSE\nSegment: main::entry\nCode:\n  dump_code = atoi(argv[1]);\n  n = atoi(argv[2]);\n  m = atoi(argv[3]);\n  data = malloc(n * m * 8);\n  mean = malloc(m * 8);\n\nContext: Control flow 'main::entry' in function unknown\n\n\nPlaceholder ID: unknown_IFELSE_kernel_mean::entry\nOriginal: // INSERT COMMENT IFELSE: kernel_mean::entry\nFunction: unknown\nType: IFELSE\nSegment: kernel_mean::entry\nCode:\n  j = blockDim_x * blockIdx_x + threadIdx_x;\n  if (j < m) { // IFELSE MARKER: entry IF\n  mean[j] = 0;\nfor(int64_t i = 0; i < n;   i = i + 1){\n  mean[j] = (mean[j] + data[(i * m + j)]);\n\nContext: Control flow 'kernel_mean::entry' in function unknown\n\n\nPlaceholder ID: unknown_IFELSE_kernel_stddev::entry\nOriginal: // INSERT COMMENT IFELSE: kernel_stddev::entry\nFunction: unknown\nType: IFELSE\nSegment: kernel_stddev::entry\nCode:\n  j = blockDim_x * blockIdx_x + threadIdx_x;\n  if (j < m) { // IFELSE MARKER: entry IF\n  stddev[j] = 0;\nfor(int64_t i = 0; i < n;   i = i + 1){\n  stddev[j] = (stddev[j] + ((data[(i * m + j)] - mean[j]) * (data[(i * m + j)] - mean[j])));\n\nContext: Control flow 'kernel_stddev::entry' in function unknown\n\n\nPlaceholder ID: unknown_IFELSE_kernel_reduce::entry\nOriginal: // INSERT COMMENT IFELSE: kernel_reduce::entry\nFunction: unknown\nType: IFELSE\nSegment: kernel_reduce::entry\nCode:\n  i = blockDim_x * blockIdx_x + threadIdx_x;\n  j = blockDim_y * blockIdx_y + threadIdx_y;\n  if (i < n) { // IFELSE MARKER: entry IF\n  if (j < m) { // IFELSE MARKER: land.lhs.true IF\n  data[(i * m + j)] = (data[(i * m + j)] - mean[j]);\n\nContext: Control flow 'kernel_reduce::entry' in function unknown\n\n\nPlaceholder ID: unknown_IFELSE_kernel_diag::entry\nOriginal: // INSERT COMMENT IFELSE: kernel_diag::entry\nFunction: unknown\nType: IFELSE\nSegment: kernel_diag::entry\nCode:\n  i = blockDim_x * blockIdx_x + threadIdx_x;\n  if (i < m) { // IFELSE MARKER: entry IF\n  corr[(i * m + i)] = 1;\n  }\n  return;\n\nContext: Control flow 'kernel_diag::entry' in function unknown\n\n\nPlaceholder ID: unknown_IFELSE_kernel_corr::entry\nOriginal: // INSERT COMMENT IFELSE: kernel_corr::entry\nFunction: unknown\nType: IFELSE\nSegment: kernel_corr::entry\nCode:\n  i = blockDim_x * blockIdx_x + threadIdx_x;\n  __auto_type blockDim_y_times_blockIdx_y = blockDim_y * blockIdx_y;\n  __auto_type threadIdx_y_val = threadIdx_y;\n  __auto_type y_index_base = blockDim_y_times_blockIdx_y + threadIdx_y_val;\n  __auto_type j_calc = y_index_base + i + 1;\n\nContext: Control flow 'kernel_corr::entry' in function unknown\n\n\nPlaceholder ID: unknown_IFELSE_kernel::kcall.end37\nOriginal: // INSERT COMMENT IFELSE: kernel::kcall.end37\nFunction: unknown\nType: IFELSE\nSegment: kernel::kcall.end37\nCode:\n  block_tail.batch = 1;\n  block_tail.x = 1;\n  block_tail.y = 1;\n  grid_tail.batch = 1;\n  grid_tail.x = 1;\n\nContext: Control flow 'kernel::kcall.end37' in function unknown\n\n==================================================\n\nReturn ONLY the JSON object, with no extra text.",
  "retry_prompts": [],
  "parse_retry_prompts": []
}